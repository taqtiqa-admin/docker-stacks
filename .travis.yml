language: generic
dist: trusty
sudo: true
env:
  global:
    - secure: Oj0Qyn1z9usziJd6nybP66t9tBJ7cm7WNHnqniTv9QrnNcujDFKfJXXoMbf8cYM3HVE45qXeVMn5xFbtSGyTnfJGaX3YlC4QoFjZN5T4XxebzfqEQBvn0ODRAQEreDFN5cw9j+m1uzF+iPQw7b+kOk58l0urdA+uGvCz3m3VJxJZR3K12gpW4cagdSM6qh96nro6DRk0qx0Sc7qLF7PHuJ8eTRVy7L/IpEibjqdf9ZsbWyOj7oSTrvfF/tp0ZH4q6LyVsVkb9FxWvwzZslxa/BCtWU3eGP4wcrTPjoEJqTvkhc/I/Xsog4H/5z90oPHgSGlEsyJlMGLak7GeX9/4jszWqIUW5rYT2dgqszquHxlMhzKgsrMAD+ijbM/c/VcxvZ9avsTdocdYlGpFgI6fC2snpwkmjtnSLN+W5TvAtDSajfgeKZiG3TLCeCZ/uc6crgNRz+GhfYEnQA+ndzKC33M+b2QoCUr1pNMB0ShSsWoIkkWUa1/8Yv6Yb1a9pvyDMyS+fgWVyyrs76MFxLPU95vkvi0+48eriJXSvoTGR93X97wdZVIb7BArfU3s9Rp9AQfP7Mjbn1873fcO2XLEBZD/07IE3pyFUhlBbVv2FXPPCARJYVFD+rHn1RJ6gMgfT9sx4m4iqCthaNoBo7AJgcye04TkbLsC0n66o3KIJkQ=
    - ARTIFACTS_KEY=${AWS_ACCESS_KEY_ID}
    - ARTIFACTS_SECRET=${AWS_SECRET_ACCESS_KEY}
    - ARTIFACTS_BUCKET=taqtiqa.io
  matrix:
    - ARCH=amd64 ACI_NAME=$(basename $TRAVIS_REPO_SLUG) ACI_ORG=$(dirname $TRAVIS_REPO_SLUG)
before_install:
  - git clone https://github.com/taqtiqa/ci.git
  - cat ci/scripts/openssl.sh | sudo bash
before_script:
  - openssl aes-256-cbc -pass env:ACI_SECRET -in ./rkt-stacks-privatekeys.asc.enc -out ./rkt-stacks-privatekeys.asc -d -a
script:
  - cat ./rkt-jupyter.sh | sudo bash
addons:
  artifacts:
    s3_region: "us-east-1" 
    paths:
    - $(git ls-files -o | tr "\n" ":") 
    debug: true
    target_paths:
    - /aci
notifications:
  email:
    recipients:
      - coders@taqtiqa.com
    on_success: [always]
    on_failure: [always]
