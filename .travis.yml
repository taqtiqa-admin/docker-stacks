language: generic
dist: trusty
sudo: true
env:
  global:
    - ARTIFACTS_KEY=${AWS_ACCESS_KEY_ID}
    - ARTIFACTS_SECRET=${AWS_SECRET_ACCESS_KEY}
    - ARTIFACTS_BUCKET=taqtiqa.io
  matrix:
    - ARCH=amd64 ACI_NAME=$(basename $TRAVIS_REPO_SLUG) ACI_ORG=$(dirname $TRAVIS_REPO_SLUG)
before_install:
  - git clone https://github.com/taqtiqa/ci.git
  - cat ci/scripts/openssl.sh | sudo bash
before_script:
  - openssl aes-256-cbc -pass env:ACI_SECRET -in ./rkt-stacks-privatekeys.asc.enc -out ./rkt-stacks-privatekeys.asc -d -a
script:
  - cat ./rkt-jupyter.sh | sudo bash
addons:
  artifacts:
    s3_region: "us-east-1" 
    paths:
    - $(git ls-files -o | tr "\n" ":") 
    debug: true
    target_paths:
    - /aci
notifications:
  email:
    recipients:
      - coders@taqtiqa.com
    on_success: [always]
    on_failure: [always]
